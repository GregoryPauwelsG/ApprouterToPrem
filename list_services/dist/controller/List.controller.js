sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/m/library"],function(e,t,o){"use strict";return e.extend("listservices.controller.List",{onInit:function(){this.getAvailableServices()},sendMetadata:function(e){console.log(e);$.ajax({url:"srv-api/catalog/getMetadata",type:"POST",dataType:"text",contentType:"application/json",data:JSON.stringify({metadata:e}),crossDomain:true,processData:false,success:function(e){console.log("success: "+e)},error:function(e){console.log("error: "+e);console.log(JSON.stringify(e))}})},servicePressed:function(e){console.log("test service pressed");let t=e.getSource().getBindingContext().getPath();let o=this.getView().getModel();let a=o.getProperty(t);console.log(a);let l=a.MetadataUrl;l=l.replaceAll("http://cloud.test","");var s=l.replaceAll("/$metadata","");console.log(s);var n=new sap.ui.model.odata.v2.ODataModel(s);var r=this.getView();var i;n.attachMetadataLoaded(null,function(){i=n.getServiceMetadata();console.log(i)},null);console.log(i);this.sendMetadata(i)},getAvailableServices:function(e){var o=[];if(e!=undefined){var a=e.getSource().getValue();var l=new sap.ui.model.Filter("Title",sap.ui.model.FilterOperator.Contains,a);console.log("filter: "+a);o.push(l)}var s=new sap.ui.model.odata.v2.ODataModel("/sap/opu/odata/IWFND/CATALOGSERVICE;v=2/");var n=this.getView();console.log(s);s.read("/ServiceCollection",{filters:o,success:function(e,o){console.log(e);const a=new t;a.setProperty("/services",e.results);n.setModel(a)},error:function(e){console.log(e)}})}})});